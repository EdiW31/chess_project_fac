{"ast":null,"code":"var _jsxFileName = \"C:\\\\Develop\\\\Facultate\\\\AN_III\\\\SEM_II\\\\AI\\\\proiect AI\\\\chess_project_fac\\\\fisher-random-chess\\\\frontend\\\\src\\\\components\\\\Board.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Chessboard from \"chessboardjsx\";\nimport axios from \"axios\";\nimport { Chess } from \"chess.js\";\nimport Score from \"./Score.js\";\nimport GameModeSelection from \"./GameModeSelection\";\nimport \"../styles/Board.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Board = () => {\n  _s();\n  const [gameMode, setGameMode] = useState(null); // \"ai\" sau \"friend\"\n  const [gameId, setGameId] = useState(null);\n  const [gameState, setGameState] = useState({\n    fen: \"start\",\n    moves: [],\n    scoreWhite: 0,\n    scoreBlack: 0,\n    isCheck: false,\n    isCheckmate: false\n  });\n  const [capturedPieces, setCapturedPieces] = useState({\n    white: [],\n    black: []\n  });\n  const [highlightedSquares, setHighlightedSquares] = useState({});\n  const [learningData, setLearningData] = useState(null);\n  useEffect(() => {\n    initializeGame();\n  }, []);\n  useEffect(() => {\n    axios.get(\"http://192.168.0.140:5000/api/learning_data\").then(response => {\n      console.log(\"Learning Data fetched:\", response.data); // Debugging\n      setLearningData(response.data);\n    }).catch(error => {\n      console.error(\"Error fetching learning data:\", error);\n    });\n  }, []);\n  const initializeGame = async () => {\n    try {\n      const [setupResponse, learningResponse] = await Promise.all([axios.get(\"http://192.168.0.140:5000/api/setup\"), axios.get(\"http://192.168.0.140:5000/api/learning_data\")]);\n      setGameState(prev => ({\n        ...prev,\n        fen: setupResponse.data\n      }));\n      setLearningData(learningResponse.data);\n    } catch (error) {\n      console.error(\"Error initializing game:\", error);\n    }\n  };\n  const fetchValidMoves = async square => {\n    try {\n      const response = await axios.post(\"http://192.168.0.140:5000/api/legal_moves\", {\n        fen: gameState.fen,\n        square\n      });\n      const newHighlightedSquares = response.data.moves.reduce((acc, move) => ({\n        ...acc,\n        [move]: {\n          background: \"rgba(255, 255, 0, 0.4)\",\n          borderRadius: \"50%\"\n        }\n      }), {});\n      setHighlightedSquares(newHighlightedSquares);\n    } catch (error) {\n      console.error(\"Error fetching valid moves:\", error);\n    }\n  };\n  const startMultiplayerGame = () => {\n    axios.post(\"http://192.168.0.140:5000/api/start_multiplayer_game\").then(res => {\n      console.log(\"Multiplayer game started:\", res.data); // Debugging\n      setGameId(res.data.game_id); // Setează Game ID\n      setGameState({\n        fen: res.data.fen,\n        moves: []\n      }); // Setează starea jocului\n    }).catch(error => {\n      console.error(\"Error starting multiplayer game:\", error);\n    });\n  };\n  const onDrop = ({\n    sourceSquare,\n    targetSquare\n  }) => {\n    const isPawnPromotion = checkPawnPromotion(sourceSquare, targetSquare);\n    const promotion = isPawnPromotion ? \"q\" : null;\n    axios.post(\"http://192.168.0.140:5000/api/move\", {\n      from: sourceSquare,\n      to: targetSquare,\n      fen: gameState.fen,\n      promotion\n    }).then(handleMoveResponse).catch(handleMoveError);\n  };\n  const resetGame = () => {\n    axios.get(\"http://192.168.0.140:5000/api/start_game\").then(response => {\n      setGameState({\n        fen: response.data.fen,\n        moves: [],\n        scoreWhite: 0,\n        scoreBlack: 0,\n        isCheck: false,\n        isCheckmate: false\n      });\n      setCapturedPieces({\n        white: [],\n        black: []\n      });\n    }).catch(error => console.error(\"Error resetting game:\", error));\n  };\n  const handleMoveResponse = response => {\n    if (response.data.status === \"success\") {\n      updateGameState(response.data);\n    } else if (response.data.status === \"game_over\") {\n      alert(response.data.message);\n      axios.get(\"http://192.168.0.140:5000/api/learning_data\").then(res => {\n        console.log(\"Learning Data fetched:\", res.data); // Debugging\n        setLearningData(res.data); // Actualizează Learning Data\n      }).catch(error => {\n        console.error(\"Error fetching learning data:\", error);\n      });\n      resetGame(); // Resetează jocul\n    } else {\n      alert(response.data.message || \"Invalid move.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 10\n  }, this);\n};\n_s(Board, \"4okUL4KNGq16O8hGUJnoKo5GSAM=\");\n_c = Board;\nexport default Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["React","useState","useEffect","Chessboard","axios","Chess","Score","GameModeSelection","jsxDEV","_jsxDEV","Board","_s","gameMode","setGameMode","gameId","setGameId","gameState","setGameState","fen","moves","scoreWhite","scoreBlack","isCheck","isCheckmate","capturedPieces","setCapturedPieces","white","black","highlightedSquares","setHighlightedSquares","learningData","setLearningData","initializeGame","get","then","response","console","log","data","catch","error","setupResponse","learningResponse","Promise","all","prev","fetchValidMoves","square","post","newHighlightedSquares","reduce","acc","move","background","borderRadius","startMultiplayerGame","res","game_id","onDrop","sourceSquare","targetSquare","isPawnPromotion","checkPawnPromotion","promotion","from","to","handleMoveResponse","handleMoveError","resetGame","status","updateGameState","alert","message","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Develop/Facultate/AN_III/SEM_II/AI/proiect AI/chess_project_fac/fisher-random-chess/frontend/src/components/Board.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Chessboard from \"chessboardjsx\";\r\nimport axios from \"axios\";\r\nimport { Chess } from \"chess.js\";\r\nimport Score from \"./Score.js\";\r\nimport GameModeSelection from \"./GameModeSelection\";\r\nimport \"../styles/Board.scss\";\r\n\r\nconst Board = () => {\r\n  const [gameMode, setGameMode] = useState(null); // \"ai\" sau \"friend\"\r\n  const [gameId, setGameId] = useState(null);\r\n\r\n  const [gameState, setGameState] = useState({\r\n    fen: \"start\",\r\n    moves: [],\r\n    scoreWhite: 0,\r\n    scoreBlack: 0,\r\n    isCheck: false,\r\n    isCheckmate: false,\r\n  });\r\n\r\n  const [capturedPieces, setCapturedPieces] = useState({\r\n    white: [],\r\n    black: [],\r\n  });\r\n\r\n  const [highlightedSquares, setHighlightedSquares] = useState({});\r\n  const [learningData, setLearningData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    initializeGame();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://192.168.0.140:5000/api/learning_data\")\r\n      .then((response) => {\r\n        console.log(\"Learning Data fetched:\", response.data); // Debugging\r\n        setLearningData(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching learning data:\", error);\r\n      });\r\n  }, []);\r\n\r\n  const initializeGame = async () => {\r\n    try {\r\n      const [setupResponse, learningResponse] = await Promise.all([\r\n        axios.get(\"http://192.168.0.140:5000/api/setup\"),\r\n        axios.get(\"http://192.168.0.140:5000/api/learning_data\"),\r\n      ]);\r\n\r\n      setGameState((prev) => ({ ...prev, fen: setupResponse.data }));\r\n      setLearningData(learningResponse.data);\r\n    } catch (error) {\r\n      console.error(\"Error initializing game:\", error);\r\n    }\r\n  };\r\n\r\n  const fetchValidMoves = async (square) => {\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://192.168.0.140:5000/api/legal_moves\",\r\n        {\r\n          fen: gameState.fen,\r\n          square,\r\n        }\r\n      );\r\n\r\n      const newHighlightedSquares = response.data.moves.reduce(\r\n        (acc, move) => ({\r\n          ...acc,\r\n          [move]: {\r\n            background: \"rgba(255, 255, 0, 0.4)\",\r\n            borderRadius: \"50%\",\r\n          },\r\n        }),\r\n        {}\r\n      );\r\n\r\n      setHighlightedSquares(newHighlightedSquares);\r\n    } catch (error) {\r\n      console.error(\"Error fetching valid moves:\", error);\r\n    }\r\n  };\r\n\r\n  const startMultiplayerGame = () => {\r\n    axios\r\n      .post(\"http://192.168.0.140:5000/api/start_multiplayer_game\")\r\n      .then((res) => {\r\n        console.log(\"Multiplayer game started:\", res.data); // Debugging\r\n        setGameId(res.data.game_id); // Setează Game ID\r\n        setGameState({ fen: res.data.fen, moves: [] }); // Setează starea jocului\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error starting multiplayer game:\", error);\r\n      });\r\n  };\r\n\r\n  const onDrop = ({ sourceSquare, targetSquare }) => {\r\n    const isPawnPromotion = checkPawnPromotion(sourceSquare, targetSquare);\r\n    const promotion = isPawnPromotion ? \"q\" : null;\r\n\r\n    axios\r\n      .post(\"http://192.168.0.140:5000/api/move\", {\r\n        from: sourceSquare,\r\n        to: targetSquare,\r\n        fen: gameState.fen,\r\n        promotion,\r\n      })\r\n      .then(handleMoveResponse)\r\n      .catch(handleMoveError);\r\n  };\r\n\r\n  const resetGame = () => {\r\n    axios\r\n      .get(\"http://192.168.0.140:5000/api/start_game\")\r\n      .then((response) => {\r\n        setGameState({\r\n          fen: response.data.fen,\r\n          moves: [],\r\n          scoreWhite: 0,\r\n          scoreBlack: 0,\r\n          isCheck: false,\r\n          isCheckmate: false,\r\n        });\r\n        setCapturedPieces({ white: [], black: [] });\r\n      })\r\n      .catch((error) => console.error(\"Error resetting game:\", error));\r\n  };\r\n\r\n  const handleMoveResponse = (response) => {\r\n    if (response.data.status === \"success\") {\r\n      updateGameState(response.data);\r\n    } else if (response.data.status === \"game_over\") {\r\n      alert(response.data.message);\r\n\r\n      axios\r\n        .get(\"http://192.168.0.140:5000/api/learning_data\")\r\n        .then((res) => {\r\n          console.log(\"Learning Data fetched:\", res.data); // Debugging\r\n          setLearningData(res.data); // Actualizează Learning Data\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error fetching learning data:\", error);\r\n        });\r\n\r\n      resetGame(); // Resetează jocul\r\n    } else {\r\n      alert(response.data.message || \"Invalid move.\");\r\n    }\r\n  };\r\n\r\n  return <div>{/* Restul codului */}</div>;\r\n};\r\n\r\nexport default Board;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}